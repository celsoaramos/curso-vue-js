<html>
    <head>

        <title>Desafio 1</title>
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    </head>

    <body>
        <div id="app">

            <resultado
                    :nome="usuario.nome"
                    :idade="usuario.idade"
            >
            </resultado>

            <meu-formulario
            label="nome"
            @btn-salvar-form="mostrarValor"> 
            ></meu-formulario>

            <meu-formulario
                label="idade"
                @btn-salvar-form="mostrarValor"
            ></meu-formulario>

        </div>

        <script>

            const resultado = Vue.component('resultado', {

                template:   '<div>' + 
                                'Meu nome é   : {{ nome  }} <br/>' +
                                'Minha idade é: {{ idade }}' +
                            '</div>',
                
                props: {
                    nome: { type: String, default: '' },
                    idade: { type: String, default: '' }
                },

            })

            const formulario = Vue.component('meu-formulario', {
                template:   '<div>' + 
                                '<span> {{ label }} </span>' + 
                                '<input type="text" v-model="texto" />' + 
                                '<input type="button" @click="limpar" value="limpar"></button>' + 
                                '<input type="button" @click="salvar" value="salvar"></button>' +
                            '</div>',

                props: {
                    label: { type: String },  // ÓTIMO
                },
            
                data() {
                    return {
                        texto: ''
                    };
                },
                methods: {
                    limpar() {
                        this.texto = '';
                    },

                    salvar() {
                        this.$emit('btn-salvar-form', this.texto, this.label);
                    }
                }
            })



            const app = new Vue({
                el: '#app',
                data() {
                    return {
                        usuario: {
                            nome: '',
                            idade: '',
                    },
                };
                },
                methods: {
                    mostrarValor(texto, label) {
                        if (label == 'nome') {
                            //alert('nome ' + texto);
                            this.usuario.nome = texto;
                        } else {
                            //alert('idade ' + texto);
                            this.usuario.idade = texto;
                        }
                    }
                }
            })

        </script>
    </body>
</html>